<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Empirical Precision</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
        <h1>Empirical Precision</h1>

        <div class="tabs-nav-container">
            <nav class="tabs-nav" aria-label="Tabs">
                <a class="tab-link active" data-tab="about-us">About Us</a>
                <a class="tab-link" data-tab="firearms">Firearms</a>
                <a class="tab-link" data-tab="loads">Load Data</a>
                <a class="tab-link" data-tab="targets">Targets</a>
                <a class="tab-link" data-tab="marking">Marking</a>
                <a class="tab-link" data-tab="analysis">Analysis</a>
                <a class="tab-link" data-tab="components">Components</a>
                <a class="tab-link" data-tab="misc">Misc</a>
                <a class="tab-link" data-tab="db-management">DB Management</a>
            </nav>
        </div>

        <div id="about-us" class="tab-content active">
            <div class="card">
                <h3>Welcome to Empirical Precision</h3>
                <p class="about-us-p">
                    This web application is a comprehensive tool designed for shooting enthusiasts, competitive marksmen, and handloaders. Our goal is to provide a single, powerful platform to manage every aspect of your shooting hobby, from the components on your reloading bench to the final analysis of your performance on the range.
                </p>
                <h4>Key Features:</h4>
                <ul class="about-us-p" style="list-style-position: inside;">
                    <li><strong>Component Management:</strong> Keep a detailed inventory of your reloading components, including bullets, powders, primers, and brass.</li>
                    <li><strong>Load Data Management:</strong> Develop, save, and manage your specific handload recipes and commercial ammunition.</li>
                    <li><strong>Target Management:</strong> Upload images of your targets to create a digital library for analysis.</li>
                    <li><strong>Impact Marking & Analysis:</strong> Digitize your targets by marking points of aim and impact, then instantly calculate critical statistics like Mean Radius and Standard Deviation.</li>
                    <li><strong>Advanced Diagnostics:</strong> Automatically analyze shot dispersion to identify issues like vertical stringing and correlate it with muzzle velocity data to pinpoint the root cause.</li>
                </ul>
                 <h4>Recommended Workflow:</h4>
                 <p class="about-us-p">
                    For the best experience, we recommend following this workflow:
                 </p>
                 <ol class="about-us-p" style="list-style-position: inside;">
                    <li><strong>Firearms Tab:</strong> Start by adding the firearms you'll be using.</li>
                    <li><strong>Load Data Tab:</strong> Create your load recipes, linking them to your components.</li>
                    <li><strong>Targets Tab:</strong> Upload images of the paper targets you've shot.</li>
                    <li><strong>Marking Tab:</strong> Select a firearm, load, and target. Then, mark your point-of-aim and impacts on the canvas to save a new session. Enter velocity data for each shot if you have it.</li>
                    <li><strong>Analysis Tab:</strong> Load your saved sessions to view detailed statistics, compare performance against other sessions, and use the diagnostic tools to understand your results.</li>
                 </ol>
                 <h4>A Note on Group Size & Statistical Significance</h4>
                 <p class="about-us-p">
                     When evaluating the precision of a load, it's tempting to rely on small, 3 or 5-shot groups. They are quick to shoot and easy to measure. However, the results from such small sample sizes can often be misleading. A tight 3-shot group might be a statistical fluke rather than a true representation of your load's potential, just as a surprisingly wide group might be the result of a single random flyer.
                 </p>
                 <p class="about-us-p">
                     The power of statistical analysis, and a core principle of this application, lies in using larger data sets. As you increase the number of shots in your sample—from 5 to 10, and ideally to 20 or 30—the calculated metrics like <strong>Mean Radius</strong> become far more reliable. These larger groups smooth out the randomness of individual shots, giving you a much clearer picture of the load's true capabilities.
                 </p>
                 <p class="about-us-p">
                     This becomes critically important when comparing two different loads. Is your new handload <em>really</em> more precise than the old one? Comparing two 5-shot groups might not provide a definitive answer, as the difference you see could easily be due to chance. The more data you collect, the more confident you can be in your conclusions.
                 </p>
                 <p class="about-us-p">
                    All your data is stored securely and privately in your local browser database. Nothing is uploaded to a server, ensuring you have full control over your information and can even use the application offline.
                </p>
            </div>
        </div>

        <div id="firearms" class="tab-content">
             <div class="card">
                <h3>Manage Firearms</h3>
                <form id="firearmForm" class="form-grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                    <input type="hidden" id="firearmId">
                    <div><label for="firearmNickname">Nickname</label><input type="text" id="firearmNickname" required></div>
                    <div><label for="firearmDiameter">Diameter</label><select id="firearmDiameter"></select></div>
                    <div><label for="firearmCartridge">Cartridge</label><select id="firearmCartridge"></select></div>
                    <div><label for="firearmBarrelLength">Barrel Length</label><input type="number" step="0.1" id="firearmBarrelLength"></div>
                    <div><label for="firearmTwistRate">Twist Rate</label><input type="text" id="firearmTwistRate"></div>
                    <div><label for="firearmMagCoal">Max Mag COAL</label><input type="number" step="0.001" id="firearmMagCoal"></div>
                </form>
                <div class="flex-container" style="margin-top: 1rem; max-width: 400px;">
                    <button type="submit" form="firearmForm" class="btn-blue">Save Firearm</button>
                    <button type="reset" form="firearmForm" class="btn-gray">Clear Form</button>
                </div>
                <div class="data-table-container">
                    <table class="data-table">
                        <thead><tr><th>Nickname</th><th>Cartridge</th><th>Barrel</th><th>Twist</th><th>Actions</th></tr></thead>
                        <tbody id="firearmsTableBody"></tbody>
                    </table>
                </div>
             </div>
        </div>

        <div id="loads" class="tab-content">
            <div class="card">
                <h3>Manage Load Data</h3>
                <div class="tabs-nav" style="border-bottom: 1px solid #374151; margin-bottom: 1.5rem;">
                    <a class="sub-tab-link active" data-subtab="hand-load">Hand Load</a>
                    <a class="sub-tab-link" data-subtab="commercial-ammo">Commercial Ammo</a>
                </div>

                <div id="load-forms-container">
                    <div class="tab-content active" id="hand-load-subtab">
                        <form id="loadForm">
                            <input type="hidden" id="loadId">
                            <div class="form-grid" style="grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                                <div><label for="loadDiameter">Diameter</label><select id="loadDiameter"></select></div>
                                <div><label for="loadCartridge">Cartridge</label><select id="loadCartridge"></select></div>
                            </div>
                            <div class="form-grid" style="grid-template-columns: 1fr 2fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                                <div><label for="loadBulletWeight">Bullet Weight</label><select id="loadBulletWeight"></select></div>
                                <div><label for="loadBullet">Bullet (Manuf./Name)</label><select id="loadBullet"></select></div>
                                <div><label for="loadBulletLot">Bullet Lot</label><input type="text" id="loadBulletLot"></div>
                            </div>
                            <div class="form-grid" style="grid-template-columns: 1fr 1fr 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                                <div><label for="loadPowderManufacturer">Powder Manufacturer</label><select id="loadPowderManufacturer"></select></div>
                                <div><label for="loadPowder">Powder</label><select id="loadPowder"></select></div>
                                <div><label for="loadChargeWeight">Charge (grains)</label><input type="number" step="0.1" id="loadChargeWeight" required></div>
                                <div><label for="loadPowderLot">Powder Lot</label><input type="text" id="loadPowderLot"></div>
                            </div>
                            <div class="form-grid" style="grid-template-columns: 1fr 1fr 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                                <div><label for="loadPrimer">Primer</label><select id="loadPrimer"></select></div>
                                <div><label for="loadPrimerLot">Primer Lot</label><input type="text" id="loadPrimerLot"></div>
                                <div><label for="loadCol">COL</label><input type="number" step="0.001" id="loadCol"></div>
                                <div><label for="loadCbto">CBTO</label><input type="number" step="0.001" id="loadCbto"></div>
                            </div>
                            <div class="form-grid" style="grid-template-columns: 1fr 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                                <div><label for="loadBrass">Brass Manufacturer</label><select id="loadBrass"></select></div>
                                <div><label for="loadBrassLot">Brass Lot</label><input type="text" id="loadBrassLot"></div>
                                <div><label for="loadFirings"># of Firings</label><input type="number" step="1" id="loadFirings"></div>
                            </div>
                        </form>
                        <div class="flex-container" style="margin-top: 1rem; max-width: 400px;">
                            <button type="submit" form="loadForm" class="btn-blue">Save Hand Load</button>
                            <button type="reset" form="loadForm" class="btn-gray">Clear Form</button>
                        </div>
                    </div>

                    <div class="tab-content" id="commercial-ammo-subtab">
                        <form id="commercialAmmoForm" class="form-grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                            <input type="hidden" id="commercialAmmoId">
                            <div><label for="commercialAmmoManufacturer">Manufacturer</label><select id="commercialAmmoManufacturer"></select></div>
                            <div><label for="commercialAmmoName">Ammo Name</label><input type="text" id="commercialAmmoName" required></div>
                            <div><label for="commercialAmmoDiameter">Diameter</label><select id="commercialAmmoDiameter"></select></div>
                            <div><label for="commercialAmmoCartridge">Cartridge</label><select id="commercialAmmoCartridge"></select></div>
                            <div><label for="commercialAmmoBulletWeight">Bullet Weight (grains)</label><input type="number" step="0.1" id="commercialAmmoBulletWeight"></div>
                            <div><label for="commercialAmmoLot">Lot #</label><input type="text" id="commercialAmmoLot"></div>
                        </form>
                        <div class="flex-container" style="margin-top: 1rem; max-width: 400px;">
                            <button type="submit" form="commercialAmmoForm" class="btn-blue">Save Commercial Ammo</button>
                            <button type="reset" form="commercialAmmoForm" class="btn-gray">Clear Form</button>
                        </div>
                    </div>
                </div>

                <div class="data-table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th>Type</th>
                                <th>Cartridge</th>
                                <th>Details</th>
                                <th>Charge</th>
                                <th>COL / CBTO</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="loadsTableBody"></tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="targets" class="tab-content">
            <div class="card">
                <h3>Manage Targets</h3>
                <div>
                    <label for="uploadTargetImage">Upload New Target Image(s)</label>
                    <input type="file" id="uploadTargetImage" accept="image/*" multiple>
                </div>
                <div id="targetGallery" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 1rem; margin-top: 1.5rem;">
                    </div>
            </div>
        </div>

        <div id="marking" class="tab-content">
            <div class="grid-layout">
                <div class="card">
                    <div class="control-panel">
                        <div>
                            <h4>Setup</h4>
                            <label for="savedImageSelect">Load Saved Image</label>
                            <select id="savedImageSelect"></select>

                            <div style="border-top: 1px solid #374151; padding-top: 0.75rem; margin-top: 0.75rem;">
                                <label for="markingSessionSelect">Load Saved Session</label>
                                <select id="markingSessionSelect"></select>
                                <div class="flex-container" style="margin-top: 0.5rem;">
                                    <button id="loadMarkingSessionBtn" class="btn-blue">Load Session</button>
                                    <button id="deleteMarkingSessionBtn" class="btn-red">Delete Session</button>
                                </div>
                            </div>
                            
                            <button id="removeImage" class="btn-red" style="margin-top: 1rem;">Clear Canvas & New Session</button>
                        </div>
                        <div>
                            <h4>Image Controls</h4>
                            <label>Zoom</label>
                            <div class="flex-container">
                                <button id="zoomIn" class="btn-gray">+</button>
                                <button id="zoomOut" class="btn-gray">-</button>
                            </div>
                            <label style="margin-top: 0.5rem;">Scale</label>
                            <div class="scale-input-container">
                                <input type="number" id="scaleDistance" value="1" placeholder="e.g., 1">
                                <select id="scaleUnits">
                                    <option value="in">Inches (in)</option>
                                    <option value="mm">Millimeters (mm)</option>
                                </select>
                            </div>
                            <button id="setScale" class="btn-blue toggle-btn" style="margin-top: 0.5rem;">Set Scale</button>
                        </div>
                        <div>
                            <h4>Marking Tools</h4>
                             <div>
                                <label for="groupSelect">Active Group</label>
                                <select id="groupSelect"></select>
                            </div>
                            <div class="flex-container" style="margin-top: 0.5rem;">
                                <button id="addGroup" class="btn-blue">New Group</button>
                                <button id="deleteGroup" class="btn-red">Delete Group</button>
                            </div>
                            <div class="flex-container" style="margin-top: 0.5rem;">
                                <button id="setPoa" class="btn-blue toggle-btn">Set POA</button>
                                <button id="setPoi" class="btn-blue toggle-btn">Mark Impacts</button>
                            </div>
                            <div class="flex-container" style="margin-top: 0.5rem;">
                                <button id="deleteShot" class="btn-yellow toggle-btn">Delete Shot</button>
                                <button id="deleteLast" class="btn-yellow">Delete Last</button>
                            </div>
                        </div>
                         <div>
                            <h4>Session Info</h4>
                            <label for="firearmSelect">Select Firearm</label>
                            <select id="firearmSelect"></select>
                            <label for="loadSelect" style="margin-top: 0.5rem;">Associate Load (Optional)</label>
                            <select id="loadSelect"></select>
                            <label for="tmTargetDistance" style="margin-top: 0.5rem;">Target Distance</label>
                            <div class="flex-container">
                                <input type="number" id="tmTargetDistance" placeholder="e.g., 100" style="width: 70%;">
                                <select id="tmDistanceUnits" style="width: 30%;">
                                    <option value="yards">Yards</option>
                                    <option value="meters">Meters</option>
                                </select>
                            </div>
                        </div>
                        
                        <div>
                            <h4>Actions</h4>
                            <button id="saveImpactDataBtn" class="btn-blue" style="margin-top: 0.5rem;">Save / Update Session</button>
                        </div>

                    </div>
                </div>
                <div class="main-content card">
                    <div class="canvas-container">
                        <canvas id="targetCanvas" width="800" height="1150"></canvas>
                    </div>
                </div>
            </div>
            <div id="stats-container" class="card stats-container">
                <h3>Impact Data</h3>
                <div id="stats-output" class="stats-output">
                    <p>Impact data will appear here once you mark points and set a scale.</p>
                </div>
            </div>
        </div>

        <div id="analysis" class="tab-content">
            <div class="card">
                <h3>Session Analysis</h3>
                 <div>
                    <label for="firearmFilterSelect">Filter by Firearm</label>
                    <select id="firearmFilterSelect"></select>
                 </div>
                 <div style="margin-top: 1rem;">
                    <label for="sessionSelect">Select Session(s) to Analyze (Ctrl+Click or Cmd+Click for multiple)</label>
                    <select id="sessionSelect" multiple size="8"></select>
                </div>
                <div style="margin-top: 1rem;" class="flex-container">
                    <button id="compareSessionsBtn" class="btn-blue">Analyze Selected Session(s)</button>
                    <button id="exportAnalysisBtn" class="btn-indigo">Export as Image</button>
                </div>
            </div>
            <div class="card" style="margin-top: 1.5rem;">
                <h3>Analysis Results</h3>
                <div id="statAnalysisOutput" class="data-table-container" style="max-height: none;">
                     <p style="text-align: center; padding: 1rem; color: #9ca3af;">Select one or more sessions and click analyze.</p>
                </div>
                <div id="analysisPlotContainer" style="margin-top: 1.5rem; text-align: center;"></div>
            </div>
            <div class="card" style="margin-top: 1.5rem;">
                <h3>Calculation Details & Terminology</h3>
                        <h4>Group Statistics</h4>
                        <p><strong>Mean Radius:</strong> The average distance of all shots from the geometric center (mean point of impact) of the group. A smaller value indicates better precision. This is the primary metric used for ranking.</p>
                        <p><strong>CI for Mean Radius (95%):</strong> This provides a likely range for the true Mean Radius of your load, calculated using bootstrapping. Because you are using a sample of shots, the measured Mean Radius has some uncertainty. The color-coded text indicates the level of confidence based on the width of this interval relative to the measured value. A <strong>narrow interval (High confidence)</strong> gives you high confidence that your measurement is close to the true value. A <strong>wide interval (Low confidence)</strong> indicates high uncertainty, usually due to a small number of shots.</p>

                        <h4>Dispersion Statistics</h4>
                        <p><strong>SD (Horizontal/Vertical):</strong> The Standard Deviation of shot placement on each axis. Measures the consistency of shots along that axis.</p>

                        <h4>Velocity & Dispersion Analysis</h4>
                        <p><strong>Velocity SD (Standard Deviation):</strong> A measure of the consistency of the muzzle velocity. A lower SD indicates more consistent ammunition.</p>
                        <p><strong>Vertical Stringing:</strong> The analysis automatically checks if the vertical spread (SD) of the group is significantly larger than the horizontal spread (specifically, if Vertical SD is > 1.5x Horizontal SD). If detected, it suggests a potential issue, often related to inconsistent muzzle velocity.</p>
                        <p><strong>Velocity Correlation (R²):</strong> If vertical stringing is detected and velocity data is available (for 3+ shots), an R-squared (R²) value is calculated. This value, from 0% to 100%, indicates how much of the vertical shot placement can be explained by changes in velocity. A high R² value (e.g., > 40%) strongly suggests that inconsistent muzzle velocity is a primary cause of the vertical spread.</p>
            </div>
        </div>

        <div id="components" class="tab-content">
            <div class="card">
                <div class="tabs-nav" style="border-bottom: none; margin-bottom: 1.5rem;">
                    <a class="sub-tab-link active" data-subtab="bullets">Bullets</a>
                    <a class="sub-tab-link" data-subtab="powders">Powder</a>
                    <a class="sub-tab-link" data-subtab="primers">Primers</a>
                    <a class="sub-tab-link" data-subtab="brass">Brass</a>
                </div>

                <div class="tab-content active" id="bullets-subtab">
                    <h3>Manage Bullets</h3>
                    <form id="bulletForm" class="form-grid">
                        <input type="hidden" id="bulletId">
                        <div><label for="bulletManufacturer">Manufacturer</label><select id="bulletManufacturer"></select></div>
                        <div><label for="bulletDiameter">Diameter</label><select id="bulletDiameter"></select></div>
                        <div><label for="bulletName">Bullet Name</label><input type="text" id="bulletName" required></div>
                        <div><label for="bulletWeight">Weight (grains)</label><input type="number" id="bulletWeight" step="0.1" required></div>
                        <div><label for="bulletLength">Length (in)</label><input type="number" id="bulletLength" step="0.001"></div>
                    </form>
                    <div class="flex-container" style="margin-top: 1rem; max-width: 400px;">
                        <button type="submit" form="bulletForm" class="btn-blue">Save Bullet</button>
                        <button type="reset" form="bulletForm" class="btn-gray">Clear Form</button>
                    </div>
                    <div class="data-table-container">
                        <table class="data-table">
                            <thead><tr><th>Name</th><th>Manufacturer</th><th>Diameter</th><th>Weight</th><th>Length</th><th>Actions</th></tr></thead>
                            <tbody id="bulletsTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <div class="tab-content" id="powders-subtab">
                    <h3>Manage Powders</h3>
                    <form id="powderForm" class="form-grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                        <input type="hidden" id="powderId">
                        <div><label for="powderManufacturer">Manufacturer</label><select id="powderManufacturer"></select></div>
                        <div><label for="powderName">Powder Name</label><input type="text" id="powderName" required></div>
                    </form>
                     <div class="flex-container" style="margin-top: 1rem; max-width: 400px;">
                        <button type="submit" form="powderForm" class="btn-blue">Save Powder</button>
                        <button type="reset" form="powderForm" class="btn-gray">Clear Form</button>
                    </div>
                    <div class="data-table-container">
                        <table class="data-table">
                            <thead><tr><th>Name</th><th>Manufacturer</th><th>Actions</th></tr></thead>
                            <tbody id="powdersTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <div class="tab-content" id="primers-subtab">
                    <h3>Manage Primers</h3>
                    <form id="primerForm" class="form-grid" style="grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                        <input type="hidden" id="primerId">
                        <div><label for="primerManufacturer">Manufacturer</label><select id="primerManufacturer"></select></div>
                        <div><label for="primerName">Primer Name</label><input type="text" id="primerName" required></div>
                    </form>
                     <div class="flex-container" style="margin-top: 1rem; max-width: 400px;">
                        <button type="submit" form="primerForm" class="btn-blue">Save Primer</button>
                        <button type="reset" form="primerForm" class="btn-gray">Clear Form</button>
                    </div>
                    <div class="data-table-container">
                        <table class="data-table">
                            <thead><tr><th>Name</th><th>Manufacturer</th><th>Actions</th></tr></thead>
                            <tbody id="primersTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <div class="tab-content" id="brass-subtab">
                    <h3>Manage Brass</h3>
                    <form id="brassForm" class="form-grid">
                        <input type="hidden" id="brassId">
                        <div><label for="brassDiameter">Diameter</label><select id="brassDiameter"></select></div>
                        <div><label for="brassCartridge">Cartridge</label><select id="brassCartridge"></select></div>
                        <div><label for="brassManufacturer">Manufacturer</label><select id="brassManufacturer"></select></div>
                        <div><label for="brassPrimerPocket">Primer Pocket</label><input type="text" id="brassPrimerPocket"></div>
                        <div><label for="brassPrimerHole">Primer Hole</label><input type="text" id="brassPrimerHole"></div>
                    </form>
                     <div class="flex-container" style="margin-top: 1rem; max-width: 400px;">
                        <button type="submit" form="brassForm" class="btn-blue">Save Brass</button>
                        <button type="reset" form="brassForm" class="btn-gray">Clear Form</button>
                    </div>
                    <div class="data-table-container">
                        <table class="data-table">
                            <thead><tr><th>Cartridge</th><th>Manufacturer</th><th>Pocket</th><th>Hole</th><th>Actions</th></tr></thead>
                            <tbody id="brassTableBody"></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div id="misc" class="tab-content">
             <div class="card">
                <div class="tabs-nav" style="border-bottom: none; margin-bottom: 1.5rem;">
                    <a class="sub-tab-link active" data-subtab="manufacturers">Manufacturers</a>
                    <a class="sub-tab-link" data-subtab="diameters">Diameters</a>
                    <a class="sub-tab-link" data-subtab="cartridges">Cartridges</a>
                </div>

                <div class="tab-content active" id="manufacturers-subtab">
                    <h3>Manage Manufacturers</h3>
                    <form id="manufacturerForm" class="form-grid" style="grid-template-columns: 1fr; gap: 1.5rem;">
                        <input type="hidden" id="manufacturerId">
                        <div><label for="manufacturerName">Manufacturer Name</label><input type="text" id="manufacturerName" required></div>
                        <div>
                            <label>Type of Manufacturer</label>
                            <div class="checkbox-group">
                                <label><input type="checkbox" name="manufacturerType" value="bullet"> Bullet</label>
                                <label><input type="checkbox" name="manufacturerType" value="powder"> Powder</label>
                                <label><input type="checkbox" name="manufacturerType" value="primer"> Primer</label>
                                <label><input type="checkbox" name="manufacturerType" value="brass"> Brass</label>
                            </div>
                        </div>
                    </form>
                    <div class="flex-container" style="margin-top: 1rem; max-width: 400px;">
                        <button type="submit" form="manufacturerForm" class="btn-blue">Save Manufacturer</button>
                        <button type="reset" form="manufacturerForm" class="btn-gray">Clear Form</button>
                    </div>
                    <div class="data-table-container">
                        <table class="data-table">
                            <thead><tr><th>Name</th><th>Types</th><th>Actions</th></tr></thead>
                            <tbody id="manufacturersTableBody"></tbody>
                        </table>
                    </div>
                </div>

                <div class="tab-content" id="diameters-subtab">
                    <h3>Manage Diameters</h3>
                    <form id="diameterForm" class="form-grid">
                        <input type="hidden" id="diameterId">
                        <div><label for="diameterImperial">Imperial (e.g., .308)</label><input type="text" id="diameterImperial" required></div>
                        <div><label for="diameterMetric">Metric (e.g., 7.62mm)</label><input type="text" id="diameterMetric"></div>
                    </form>
                    <div class="flex-container" style="margin-top: 1rem; max-width: 400px;">
                        <button type="submit" form="diameterForm" class="btn-blue">Save Diameter</button>
                        <button type="reset" form="diameterForm" class="btn-gray">Clear Form</button>
                    </div>
                    <div class="data-table-container">
                        <table class="data-table">
                            <thead><tr><th>Imperial</th><th>Metric</th><th>Actions</th></tr></thead>
                            <tbody id="diametersTableBody"></tbody>
                        </table>
                    </div>
                </div>
                
                <div class="tab-content" id="cartridges-subtab">
                    <h3>Manage Cartridges</h3>
                    <form id="cartridgeForm" class="form-grid">
                        <input type="hidden" id="cartridgeId">
                        <div><label for="cartridgeName">Cartridge Name</label><input type="text" id="cartridgeName" required></div>
                        <div><label for="cartridgeDiameter">Diameter</label><select id="cartridgeDiameter"></select></div>
                        <div><label for="cartridgeOAL">Overall Length (OAL)</label><input type="number" step="0.001" id="cartridgeOAL"></div>
                    </form>
                    <div class="flex-container" style="margin-top: 1rem; max-width: 400px;">
                        <button type="submit" form="cartridgeForm" class="btn-blue">Save Cartridge</button>
                        <button type="reset" form="cartridgeForm" class="btn-gray">Clear Form</button>
                    </div>
                    <div class="data-table-container">
                        <table class="data-table">
                            <thead><tr><th>Name</th><th>Diameter</th><th>OAL</th><th>Actions</th></tr></thead>
                            <tbody id="cartridgesTableBody"></tbody>
                        </table>
                    </div>
                </div>
             </div>
        </div>

        <div id="db-management" class="tab-content">
            <div class="db-grid">
                <div class="card db-actions">
                    <h3>Global Database Actions</h3>
                    <div class="action-group">
                        <button id="exportDbBtn" class="btn-blue">Export Entire Database</button>
                        <div>
                            <label for="importDbInput">Import Entire Database (JSON)</label>
                            <input type="file" id="importDbInput" accept=".json">
                        </div>
                        <button id="deleteDbBtn" class="btn-red">Delete Entire Database</button>
                    </div>
                </div>
                <div class="card db-actions">
                    <h3>Table Specific Actions</h3>
                    <div class="action-group">
                        <div>
                            <label for="tableSelect">Select Table to Manage</label>
                            <select id="tableSelect"></select>
                        </div>
                        <button id="exportTableBtn" class="btn-blue">Export Selected Table</button>
                        <div>
                            <label for="importTableInput">Import to Selected Table (JSON)</label>
                            <input type="file" id="importTableInput" accept=".json">
                        </div>
                        <button id="clearTableBtn" class="btn-orange">Clear Selected Table</button>
                    </div>
                </div>
            </div>
            <div class="card" style="margin-top: 1.5rem;">
                <h3>Table Contents: <span id="selectedTableName" style="text-transform: capitalize;"></span></h3>
                <div id="table-display-container" class="data-table-container">
                    <p style="text-align: center; color: #9ca3af;">Select a table to view its contents.</p>
                </div>
            </div>
        </div>

    </div>
    
        <script src="script.js"></script>
</body>
</html>
